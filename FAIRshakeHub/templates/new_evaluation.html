{% extends "base.html" %}

{% block header %}
    {{ block.super }}

    {% block style %}
        {{ block.super }}
        <link rel="stylesheet" href="{% static 'style/new_evaluation.css' %}" />
    {% endblock %}
{% endblock %}

{% block content %}
<div class="container-fluid">
    <h2 style="text-align: center;"><b>Evaluation:</b> <a href="{{ resource.url }}" target="_blank">{{ resource.name }}</a></h2>
    <h4 style="text-align:center;"><b>ID:</b> {{ resource.id }} &nbsp; <b>Type:</b> {{ resource.type }}</h4>
    <h4 id="bottom-heading" style="text-align:center;"><b>Description:</b> {{ resource.description }}</h4>
    <form action="/new_evaluation" id="evaluation-form" method="POST">
        <input type="hidden" name="id" value={{ resource.id }}>
        {% for question_group in questions %}
            <fieldset class="form-group"><legend>{{ question_group.label }}</legend>
            {% set group_index = loop.index %}
            {% for question in question_group.questions %}
                {% set q_id = "q-%d.%d"|format(group_index, loop.index) %}
                {% if question.kind == "yesnobut" %}
                  <div class="form-check">
                    <label class="form-check-label">
                      <input type="checkbox" class="form-check-input" name="{{ q_id }}">
                      {{ question.question }}
                    </label>
                  </div>
                {% elif question.kind == "text" %}
                  <div class="form-group row">
                    <label for="{{ q_id }}" class="col-2 col-form-label">{{ question.question }}</label>
                    <div class="col-10">
                      <input class="form-control" type="text" id="{{ q_id }}" name="{{ q_id }}">
                    </div>
                  </div>
                {% endif %}
            {% endfor %}
            </fieldset>
        {% endfor %}
        </tbody>
    </form>
    <div class="submitBtn">
        <button class="btn btn-default" type="submit" form="evaluation-form" value="Submit">Submit</button>
    </div>
    <div class="cancelBtn">
        <button class="btn btn-default" type="submit" value="Cancel" onclick="javascript:window.history.back()">Cancel</button>
    </div>
</div>
{% endblock %}